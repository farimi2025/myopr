<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OPR Sekolah – Laporan Satu Muka (One Page)</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="icon-192.png" type="image/png" />
</head>
<body>
  <div id="app" class="app-container">

    <header>
      <h1>Laporan Sekolah Satu Muka (OPR)</h1>
      <p class="sokongan">
        Aplikasi untuk semua guru, PK dan Guru Besar – isi laporan, ambil gambar,
        cetak & simpan PDF. Boleh digunakan walaupun offline.
      </p>
      <button id="darkModeBtn" aria-label="Tukar ke Dark Mode">🌙 Paparan Gelap</button>
    </header>

    <!-- Borang Maklumat Sekolah & Guru -->
    <section id="dataSekolah" class="kad-borang">
      <h2>Maklumat Sekolah & Guru</h2>
      <form id="formSekolah" autocomplete="off">
        <label>
          Nama Sekolah:
          <input type="text" id="namaSekolah" required placeholder="Contoh: SK Sokor" />
        </label>
        <label>
          Alamat Sekolah:
          <textarea id="alamatSekolah" rows="2" placeholder="Alamat penuh sekolah"></textarea>
        </label>
        <label>
          Logo Sekolah (PNG/JPG):
          <input type="file" id="logoSekolah" accept="image/png, image/jpeg" />
        </label>
        <div id="previewLogo"></div>
        <label>
          Nama Guru Pelapor:
          <input type="text" id="guruPelapor" required placeholder="Nama penuh guru pelapor" />
        </label>
        <label>
          Nama Guru Pengesah:
          <input type="text" id="guruPengesah" placeholder="Nama penuh guru pengesah (PK/GB)" />
        </label>
        <button type="submit" class="btn-utama">Simpan Maklumat Sekolah & Guru</button>
      </form>
    </section>

    <!-- Borang Laporan OPR -->
    <section id="borangOPR" class="kad-borang">
      <h2>Borang Laporan / Mesyuarat / Aktiviti Sekolah</h2>
      <form id="oprForm" autocomplete="off">
        <label>
          Nama Program/Aktiviti:
          <input type="text" id="namaProgram" required placeholder="Contoh: Mesyuarat Guru, Sukan Tahunan" />
        </label>
        <label>
          Tarikh & Masa:
          <input type="datetime-local" id="tarikhMasa" required />
        </label>
        <label>
          Tempat:
          <input type="text" id="tempat" required placeholder="Contoh: Dewan Terbuka" />
        </label>
        <label>
          Anjuran:
          <input type="text" id="anjuran" placeholder="Contoh: Sekolah, PPD, JPN, KPM, Persatuan" />
        </label>
        <label>
          Penaja:
          <input type="text" id="penaja" placeholder="Contoh: PIBG, Bank Rakyat, YB Parlimen" />
        </label>
        <label>
          Sasaran:
          <input type="text" id="sasaran" placeholder="Contoh: Semua Guru, Semua Murid Tahun 6" />
        </label>
        <label>
          Objektif:
          <textarea id="objektif" rows="2" placeholder="Nyatakan objektif program/mesyuarat..."></textarea>
        </label>
        <label>
          Butiran Aktiviti:
          <textarea id="butiranAktiviti" rows="3" placeholder="Ulasan/aturcara utama..."></textarea>
        </label>
        <label>
          Pencapaian:
          <textarea id="pencapaian" rows="2"></textarea>
        </label>
        <label>
          Kekuatan:
          <textarea id="kekuatan" rows="2"></textarea>
        </label>
        <label>
          Kelemahan:
          <textarea id="kelemahan" rows="2"></textarea>
        </label>
        <label>
          Cadangan Intervensi:
          <textarea id="intervensi" rows="2"></textarea>
        </label>
        <label>
          Impak Program:
          <textarea id="impak" rows="2"></textarea>
        </label>
        <label>
          Kos, Peralatan/Bahan:
          <textarea id="kos" rows="1" placeholder="Contoh: RM300, P.A System, Kertas"></textarea>
        </label>
        <label>
          Nama Penyedia:
          <input type="text" id="penyedia" required placeholder="Nama Guru" />
        </label>
        <label>
          Nama Penyemak:
          <input type="text" id="penyemak" placeholder="Nama Penolong Kanan / Guru Besar" />
        </label>
        <label>
          Nama Pengesah:
          <input type="text" id="pengesah" placeholder="Nama Pengetua/Guru Besar" />
        </label>

        <!-- Gambar Bukti -->
        <label>
          Gambar Bukti (max 4):
          <div class="grup-gambar">
            <button type="button" id="ambilGambarBtn">📷 Ambil Gambar</button>
            <button type="button" id="uploadGambarBtn">🖼️ Upload Gambar</button>
            <input
              type="file"
              id="gambarBukti"
              accept="image/*"
              capture="environment"
              multiple
              style="display:none"
            />
            <button type="button" id="padamGambarBtn" style="display:none">❌ Padam Gambar</button>
          </div>
          <span id="statusKamera" style="color:#c11;font-size:0.9em;"></span>
        </label>
        <div class="gambar-preview" id="gambarPreview"></div>

      </form>
      <div class="butang-grup" style="margin-top:15px;">
        <button id="simpanBtn" type="button" class="btn-utama">Simpan Laporan</button>
        <button id="downloadBtn" type="button">Download Data</button>
        <button id="cetakBtn" type="button">Cetak / Simpan PDF</button>
      </div>
    </section>

    <!-- Senarai & Carian -->
    <section id="senaraiLaporan" class="kad-senarai">
      <h2>Senarai Laporan</h2>
      <input type="search" id="carianInput" placeholder="Cari laporan / program / tempat..." />
      <div id="listOPR"></div>
    </section>
  </div>

  <footer>
    <p>Hak cipta &copy; 2025 | Aplikasi OPR Sekolah Mesra Guru | Versi 1.2</p>
    <p>
      <a href="https://github.com/cikgu-opr/opr-sekolah" target="_blank"
        >Kod Sumber (GitHub)</a
      >
    </p>
  </footer>

  <script src="indexeddb-helper.js"></script>
  <script src="pdf-generator.js"></script>
  <script src="docx-generator.js"></script>
  <script src="email-share.js"></script>
  <script src="sync-github.js"></script>
  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>
</body>
</html>
