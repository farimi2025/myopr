<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>myOPR Sekolah – Laporan 1 Halaman</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
<div class="app-container">

  <!-- Header -->
  <header>
    <img src="logo-sekolah.png" alt="Logo Sekolah" class="logo-sekolah">
    <div>
      <h1 class="judul-opr">myOPR SEKOLAH</h1>
      <div class="sub-opr" id="namaSekolahLabel"></div>
      <div class="alamat-opr" id="alamatSekolahLabel"></div>
    </div>
  </header>

  <!-- Maklumat sekolah & guru -->
  <form id="infoSekolahForm" class="blok">
    <h2>Maklumat Sekolah & Guru</h2>
    <label>Nama Sekolah: 
      <input type="text" id="namaSekolah" maxlength="60" required placeholder="Contoh: SK Tanah Merah">
      <span class="baki-aksara" id="baki_namaSekolah"></span>
    </label>
    <label>Alamat Sekolah: 
      <input type="text" id="alamatSekolah" maxlength="120" required placeholder="Alamat penuh sekolah">
      <span class="baki-aksara" id="baki_alamatSekolah"></span>
    </label>
    <label>Nama Guru (Pelapor): 
      <input type="text" id="namaGuru" maxlength="40" required placeholder="Nama penuh guru">
      <span class="baki-aksara" id="baki_namaGuru"></span>
    </label>
    <button type="submit" class="btn-utama">Simpan Maklumat</button>
  </form>

  <!-- Borang laporan -->
  <form id="oprForm" autocomplete="off" class="blok" style="display:none;">
    <h2>Borang Laporan Aktiviti</h2>
    <label>Nama Program/Aktiviti:
      <input type="text" id="namaProgram" maxlength="50" required placeholder="Contoh: Mesyuarat Panitia">
      <span class="baki-aksara" id="baki_namaProgram"></span>
    </label>
    <div class="grid-2col">
      <label>Tarikh & Masa:
        <input type="datetime-local" id="tarikhMasa" required>
      </label>
      <label>Tempat:
        <input type="text" id="tempat" maxlength="40" required placeholder="Contoh: Bilik Mesyuarat">
        <span class="baki-aksara" id="baki_tempat"></span>
      </label>
    </div>
    <label>Objektif:
      <textarea id="objektif" rows="2" maxlength="250" required placeholder="Tujuan utama aktiviti ini"></textarea>
      <span class="baki-aksara" id="baki_objektif"></span>
    </label>
    <label>Butiran Aktiviti:
      <textarea id="butiranAktiviti" rows="3" maxlength="350" required placeholder="Perincian aktiviti yang dijalankan"></textarea>
      <span class="baki-aksara" id="baki_butiranAktiviti"></span>
      <div class="tooltip">
        <button type="button" id="rekodSuaraBtn" class="icon-btn">🎤 Rakam Suara</button>
        <span class="tooltiptext">Klik untuk rakam suara (akan ditukar ke teks)</span>
      </div>
      <div id="suaraStatus" class="status-text"></div>
    </label>
    <label>Impak/Pencapaian:
      <textarea id="impak" rows="2" maxlength="200" placeholder="Hasil/kesan aktiviti"></textarea>
      <span class="baki-aksara" id="baki_impak"></span>
    </label>
    <label>Cadangan Intervensi:
      <textarea id="intervensi" rows="2" maxlength="160" placeholder="Cadangan penambahbaikan"></textarea>
      <span class="baki-aksara" id="baki_intervensi"></span>
    </label>
    <fieldset class="gambar-section">
      <legend>Gambar Bukti (min 1, maks 3)</legend>
      <div class="gambar-buttons">
        <button type="button" id="ambilGambarBtn" class="icon-btn">📷 Ambil Gambar</button>
        <button type="button" id="uploadGambarBtn" class="icon-btn">🖼️ Upload Gambar</button>
      </div>
      <input type="file" id="gambarBukti" accept="image/*" multiple style="display:none;">
      <div id="gambarPreview" class="gambar-preview"></div>
      <div class="gambar-info" id="gambarCount">0/3 gambar</div>
    </fieldset>
    <div class="grid-2col">
      <label>Guru Pelapor:
        <input type="text" id="guruPelapor" maxlength="40" required>
        <span class="baki-aksara" id="baki_guruPelapor"></span>
      </label>
      <label>Pentadbir:
        <input type="text" id="pentadbir" maxlength="40" placeholder="PK/Guru Besar">
        <span class="baki-aksara" id="baki_pentadbir"></span>
      </label>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn-utama">💾 Simpan Laporan</button>
      <button type="reset" class="btn-secondary">✖️ Set Semula</button>
    </div>
  </form>

<!-- ...header, borang & lain-lain... -->

<!-- Senarai laporan -->
<section id="senaraiLaporan" class="kad-senarai" style="display:none;">
  <div class="section-header">
    <h2>Senarai Laporan</h2>
    <div class="guru-info">Guru: <span id="labelGuruAktif"></span></div>
  </div>
  <div class="action-buttons">
    <button id="tukarGuruBtn" class="action-btn">🔄 Tukar Guru</button>
    <div class="btn-group">
      <button id="importBtn" class="action-btn">⬆️ Import</button>
      <input type="file" id="importFile" accept=".json" style="display:none;">
    </div>
    <button id="exportBtn" class="action-btn">⬇️ Eksport</button>
    <button id="downloadAllPDFBtn" class="action-btn">📥 MuatTurun Semua Laporan</button>
    <button id="githubBtn" class="action-btn">☁️ Sync GitHub</button>
    <button id="cariBtn" class="action-btn">🔍 Cari</button>
  </div>
  <div id="searchBox" class="search-box" style="display:none;">
    <input type="text" id="cariInput" placeholder="Cari laporan...">
    <button id="tutupCariBtn">✖</button>
  </div>
  <div id="listOPR" class="laporan-list"></div>
</section>

<!-- Modal Preview Laporan (Hanya Satu Set Butang) -->
<div id="modalPreview" class="modal-preview" style="display:none;">
  <div class="modal-content" id="modalPreviewContent"></div>
  <div class="modal-btn" id="modalPreviewActions" style="text-align:center;margin-top:15px;">
    <button id="btnCetakPDF" class="print-btn">🖨️ Cetak PDF</button>
    <button id="editLaporanBtn" class="edit-btn" style="background:#ff9800;">✏️ Edit</button>
    <button id="padamLaporanBtn" class="delete-btn" style="background:#e53935;">🗑️ Padam</button>
    <button id="tutupPreviewBtn2" class="close-btn">✖ Tutup</button>
  </div>
</div>
<!-- Modal gambar besar dan lain-lain kekal... -->



  <!-- Modal Preview Laporan Satu Halaman -->
 <div id="modalPreview" class="modal-preview" style="display:none;">
  <div class="modal-content" id="modalPreviewContent"></div>
  <div class="modal-btn" id="modalPreviewActions" style="text-align:center;margin-top:15px;">
    <button id="btnCetakPDF" class="print-btn">🖨️ Cetak PDF</button>
    <button id="editLaporanBtn" class="edit-btn" style="background:#ff9800;">✏️ Edit</button>
    <button id="padamLaporanBtn" class="delete-btn" style="background:#e53935;">🗑️ Padam</button>
    <button id="tutupPreviewBtn2" class="close-btn">✖ Tutup</button>
  </div>
</div>


  <!-- Modal gambar besar -->
  <div id="modalMedia" class="modal-preview" style="display:none;">
    <div id="mediaContent" class="modal-content"></div>
    <div class="modal-btn">
      <button id="tutupMediaBtn">Tutup</button>
    </div>
  </div>

  <footer>
    <p>OPR Sekolah v2.0 © 2025 - <a href="Manual Pengguna Ringkas MyOPR.md" id="bantuanLink">Bantuan</a></p>
  </footer>
</div>
<script src="app.js"></script>
</body>
</html>
